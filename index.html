<!DOCTYPE html>
<html lang="vi" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CHUM P2P Chat - Chat ngang h√†ng ch·ªß ƒë·ªÅ T·∫øt Vi·ªát Nam">
    <title>CHUM chat</title>
    <link rel="manifest" href="./manifest.webmanifest">
    <link rel="icon" href="./assets/favicon.ico">
    <link rel="apple-touch-icon" href="./assets/icons/icon-192.png">
    <meta name="theme-color" content="#1a1a2e">
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <header id="app-header">
        <h1 id="app-title">üßß CHUM chat</h1>
        <div id="header-actions">
            <span id="user-badge"></span>
            <button id="theme-toggle" aria-label="Toggle Theme">üåô</button>
        </div>
    </header>

    <main id="app-main">
        <!-- CONNECT SCREEN -->
        <section id="connect-screen" class="screen active">
            <div class="connect-card neu-card">
                <div class="card-decoration">üéä</div>
                <h2>K·∫øt N·ªëi Chat T·∫øt</h2>
                <p class="subtitle">T·∫°o ph√≤ng r·ªìi cho b·∫°n b√® qu√©t QR ƒë·ªÉ v√†o chat!</p>
                <div id="user-info" class="neu-inset">
                    <span id="my-name">...</span>
                    <button id="refresh-name" class="neu-btn-sm" aria-label="ƒê·ªïi t√™n">üîÑ</button>
                </div>
                <div class="connect-actions">
                    <button id="btn-create" class="neu-btn primary">
                        <span class="btn-icon">üì°</span>
                        <span>T·∫°o Ph√≤ng</span>
                    </button>
                </div>
            </div>

            <!-- CREATE PANEL: just show QR + room ID -->
            <div id="create-panel" class="panel neu-card hidden">
                <h3>üì° Ph√≤ng Chat C·ªßa B·∫°n</h3>
                <div id="create-loading" class="step active">
                    <p>ƒêang t·∫°o ph√≤ng...</p>
                    <div class="loader">
                        <div class="loader-dot"></div>
                        <div class="loader-dot"></div>
                        <div class="loader-dot"></div>
                    </div>
                </div>
                <div id="create-ready" class="step">
                    <p class="hint">B·∫°n b√® qu√©t QR ho·∫∑c nh·∫≠p m√£ d∆∞·ªõi ƒë·ªÉ v√†o chat</p>
                    <canvas id="room-qr" class="qr-canvas"></canvas>
                    <div class="room-id-display neu-inset">
                        <span>M√£ ph√≤ng:</span>
                        <strong id="room-id-text">---</strong>
                        <button id="copy-room-id" class="neu-btn-sm">üìã</button>
                    </div>
                    <p id="waiting-msg" class="hint">‚è≥ ƒêang ƒë·ª£i b·∫°n b√® k·∫øt n·ªëi...</p>
                </div>
                <button id="btn-cancel-create" class="neu-btn-sm danger cancel-btn">H·ªßy</button>
            </div>

            <!-- AUTO-JOIN: shown when URL has ?room= -->
            <div id="auto-join-panel" class="panel neu-card hidden">
                <h3>üöÄ ƒêang v√†o ph√≤ng chat...</h3>
                <div class="loader">
                    <div class="loader-dot"></div>
                    <div class="loader-dot"></div>
                    <div class="loader-dot"></div>
                </div>
                <p class="hint">K·∫øt n·ªëi ƒë·∫øn b·∫°n chat, vui l√≤ng ch·ªù...</p>
            </div>
        </section>

        <!-- CHAT SCREEN -->
        <section id="chat-screen" class="screen">
            <div id="chat-header" class="neu-card">
                <div id="peer-info">
                    <span id="peer-name">...</span>
                    <span id="connection-status" class="status-dot online"></span>
                </div>
                <button id="btn-disconnect" class="neu-btn-sm danger">‚ùå Ng·∫Øt</button>
            </div>
            <div id="chat-messages" class="neu-inset">
                <div id="messages-container"></div>
                <div id="empty-chat" class="empty-state">
                    <span class="empty-icon">üßß</span>
                    <p>Ch√∫c M·ª´ng NƒÉm M·ªõi! B·∫Øt ƒë·∫ßu tr√≤ chuy·ªán n√†o üéä</p>
                </div>
            </div>
            <div id="chat-input-area" class="neu-card">
                <div id="file-preview" class="hidden">
                    <span id="file-name"></span>
                    <button id="cancel-file" class="neu-btn-sm">‚ùå</button>
                </div>
                <div class="input-row">
                    <button id="btn-attach" class="neu-btn-sm" aria-label="ƒê√≠nh k√®m">üìé</button>
                    <input type="text" id="msg-input" placeholder="Nh·∫≠p tin nh·∫Øn..." autocomplete="off">
                    <button id="btn-send" class="neu-btn-sm primary" aria-label="G·ª≠i">üöÄ</button>
                </div>
                <input type="file" id="file-input" class="hidden">
            </div>
        </section>
    </main>

    <footer id="app-footer">
        <p>üßß CHUM chat ‚Äî Ch√∫c M·ª´ng NƒÉm M·ªõi üéä</p>
    </footer>



    <div id="toast-container"></div>
    <canvas id="particle-canvas"></canvas>

    <script src="./peerjs.min.js"></script>
    <script src="./qrcode.min.js"></script>
    <script src="./app.js"></script>
</body>

</html>